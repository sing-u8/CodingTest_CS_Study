-- Programmers SQL Template
-- https://school.programmers.co.kr/learn/courses/30/lessons/131535?language=mysql
-- ì¡°ê±´ì— ë§žëŠ” íšŒì›ìˆ˜ ë§žì¶”ê¸°
-- ë ˆë²¨1

-- ì˜¤ë¼í´
SELECT COUNT(USER_ID)
FROM USER_INFO
WHERE (JOINED >= TO_DATE('2021-01-01', 'YYYY-MM-DD'))
  AND (JOINED < TO_DATE('2022-01-01', 'YYYY-MM-DD'))
  AND AGE >= 20
  AND AGE <= 29;

-- MySQL
SELECT COUNT(*) AS USERS
FROM USER_INFO
WHERE YEAR(JOINED) = 2021
  AND AGE BETWEEN 20 AND 29;


/*

 ë„¤, ìž‘ì„±í•˜ì‹  ì¿¼ë¦¬ëŠ” **ì¸ë±ìŠ¤ë¥¼ í™œìš©í•  ìˆ˜ ìžˆëŠ” ê°€ìž¥ ì„±ëŠ¥ ì¢‹ì€ ë°©ì‹(SARGable)**ìœ¼ë¡œ ì•„ì£¼ ìž˜ ìž‘ì„±í•˜ì…¨ìŠµë‹ˆë‹¤!

í•˜ì§€ë§Œ ì½”ë”© í…ŒìŠ¤íŠ¸ë‚˜ ì‹¤ë¬´ì—ì„œ **ê°€ë…ì„±**ì„ ë†’ì´ê±°ë‚˜, **ë¬¸ë²•ì„ ê°„ê²°í•˜ê²Œ** ë§Œë“œëŠ” ë‹¤ë¥¸ ë°©ë²•ë“¤ë„ ìžˆìŠµë‹ˆë‹¤. ëŒ€í‘œì ì¸ 2ê°€ì§€ ëŒ€ì•ˆì„ ì†Œê°œí•´ ë“œë¦´ê²Œìš”.

---

### 1. `BETWEEN`ê³¼ ë‚ ì§œ í•¨ìˆ˜ ì‚¬ìš© (ê°€ë…ì„± ì¶”ì²œ)

ë²”ìœ„ë¥¼ ì§€ì •í•  ë•Œ `>=`ì™€ `<=`ë¥¼ ë‘ ë²ˆ ì“°ëŠ” ëŒ€ì‹  `BETWEEN`ì„ ì“°ë©´ í›¨ì”¬ ì½ê¸° íŽ¸í•©ë‹ˆë‹¤. ë˜í•œ, ì—°ë„ë¥¼ ì¶”ì¶œí•˜ëŠ” í•¨ìˆ˜(`YEAR` í˜¹ì€ `TO_CHAR`)ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìžˆìŠµë‹ˆë‹¤.

* **íŠ¹ì§•:** ì½”ë“œê°€ ì§ê´€ì ì´ë¼ ì½ê¸° ì‰½ìŠµë‹ˆë‹¤.
* **ì£¼ì˜:** `YEAR(JOINED)`ì²˜ëŸ¼ ì»¬ëŸ¼ì„ í•¨ìˆ˜ë¡œ ê°ì‹¸ë©´ ì¸ë±ìŠ¤ë¥¼ íƒ€ì§€ ëª»í•´ ë°ì´í„°ê°€ ë§Žì„ ê²½ìš° ì†ë„ê°€ ëŠë ¤ì§ˆ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. (ì½”ë”© í…ŒìŠ¤íŠ¸ì—ì„œëŠ” ì •ë‹µ ì²˜ë¦¬ë˜ì§€ë§Œ, ì‹¤ë¬´ ëŒ€ìš©ëŸ‰ ì²˜ë¦¬ ì‹œì—ëŠ” ìž‘ì„±í•˜ì‹  ì›ë³¸ ì¿¼ë¦¬ê°€ ë” ì¢‹ìŠµë‹ˆë‹¤.)

**[MySQL / PostgreSQL]**

```sql
SELECT COUNT(*) AS USERS
FROM USER_INFO
WHERE YEAR(JOINED) = 2021          -- 2021ë…„ì¸ ê²½ìš°
  AND AGE BETWEEN 20 AND 29;       -- 20ì„¸ ì´ìƒ 29ì„¸ ì´í•˜

```

**[Oracle]**

```sql
SELECT COUNT(*) AS USERS
FROM USER_INFO
WHERE TO_CHAR(JOINED, 'YYYY') = '2021'
  AND AGE BETWEEN 20 AND 29;

```

---

### 2. `LIKE` ì—°ì‚°ìž ì‚¬ìš© (ë¬¸ìžì—´ íŒ¨í„´ ë§¤ì¹­)

ë‚ ì§œ ë°ì´í„°ë„ ë‚´ë¶€ì ìœ¼ë¡œ ë¬¸ìžì—´ì²˜ëŸ¼ ì·¨ê¸‰ë˜ê±°ë‚˜ ìžë™ í˜•ë³€í™˜ì´ ë˜ëŠ” ê²½ìš°(íŠ¹ížˆ MySQL), `LIKE`ë¥¼ ì‚¬ìš©í•´ ê°„ë‹¨í•˜ê²Œ í’€ ìˆ˜ë„ ìžˆìŠµë‹ˆë‹¤.

* **íŠ¹ì§•:** '2021ë¡œ ì‹œìž‘í•˜ëŠ” ëª¨ë“  ë‚ ì§œ'ë¥¼ ì°¾ëŠ” ë°©ì‹ì´ë¼ ì½”ë“œê°€ ë§¤ìš° ì§§ì•„ì§‘ë‹ˆë‹¤.
* **ì£¼ì˜:** ë‚ ì§œ ì»¬ëŸ¼ì˜ ë°ì´í„° íƒ€ìž…ì— ë”°ë¼ ì•”ì‹œì  í˜•ë³€í™˜ì´ ë°œìƒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

```sql
SELECT COUNT(USER_ID) AS USERS
FROM USER_INFO
WHERE JOINED LIKE '2021%'        -- '2021'ë¡œ ì‹œìž‘í•˜ëŠ” ë¬¸ìžì—´(ë‚ ì§œ) ê²€ìƒ‰
  AND AGE BETWEEN 20 AND 29;

```

---

### ðŸ’¡ íŠœí„°ì˜ ê¿€íŒ (Tutor's Note)

#### 1) `COUNT(USER_ID)` vs `COUNT(*)`

* ìž‘ì„±í•˜ì‹  `COUNT(USER_ID)`ëŠ” `USER_ID`ê°€ `NULL`ì´ ì•„ë‹Œ í–‰ë§Œ ì…‰ë‹ˆë‹¤. (ë¬¸ì œì—ì„œ `USER_ID`ëŠ” PKë¼ `NULL`ì´ ì—†ìœ¼ë¯€ë¡œ ê²°ê³¼ëŠ” ê°™ìŠµë‹ˆë‹¤.)
* ë³´í†µ "ëª‡ ëª…ì¸ê°€?"ë¼ëŠ” ì¡°ê±´ì—ëŠ” **`COUNT(*)`**ë¥¼ ì“°ëŠ” ê²ƒì´ ê´€ë¡€ì ì´ë©°, `COUNT(*)`ê°€ ë‚´ë¶€ì ìœ¼ë¡œ ìµœì í™”ê°€ ìž˜ ë˜ì–´ ìžˆì–´ ì†ë„ê°€ ì•„ì£¼ ì¡°ê¸ˆ ë” ë¹ ë¥´ê±°ë‚˜ ê°™ìŠµë‹ˆë‹¤.

#### 2) ì„±ëŠ¥ vs ê°€ë…ì„±

* **ìž‘ì„±í•˜ì‹  ì¿¼ë¦¬:** `JOINED >= ... AND JOINED < ...` ë°©ì‹ì€ ì¸ë±ìŠ¤ë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìžˆì–´ **ì„±ëŠ¥ìƒ ê°€ìž¥ ì™„ë²½í•œ ë‹µì•ˆ**ìž…ë‹ˆë‹¤.
* **í•¨ìˆ˜ ì‚¬ìš©(`YEAR`) ì¿¼ë¦¬:** ì‚¬ëžŒì´ ì½ê¸°ì—ëŠ” ì¢‹ì§€ë§Œ, DB ì—”ì§„ ìž…ìž¥ì—ì„œëŠ” ëª¨ë“  ë‚ ì§œë¥¼ ì—°ë„ë¡œ ë³€í™˜í•´ë´ì•¼ ì•Œ ìˆ˜ ìžˆì–´ì„œ **ì„±ëŠ¥ì€ ì¡°ê¸ˆ ë–¨ì–´ì§‘ë‹ˆë‹¤.**

**ê²°ë¡ :** ìž‘ì„±í•˜ì‹  ì¿¼ë¦¬ê°€ ì„±ëŠ¥ ë©´ì—ì„œëŠ” 100ì ì§œë¦¬ ë‹µì•ˆì´ë©°, `BETWEEN` ì •ë„ë§Œ ì„žì–´ì„œ ì‚¬ìš©í•˜ì‹œë©´ ê°€ë…ì„±ê¹Œì§€ ì±™ê¸¸ ìˆ˜ ìžˆìŠµë‹ˆë‹¤!

 */